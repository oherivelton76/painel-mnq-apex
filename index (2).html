<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel MNQ ‚Äî APEX / NinjaTrader</title>
<style>
  body {
    background-color: #0d1117;
    color: #c9d1d9;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }
  header {
    background-color: #161b22;
    padding: 15px;
    text-align: center;
    border-bottom: 1px solid #30363d;
  }
  h1 {
    color: #58a6ff;
    margin: 0;
  }
  .section {
    padding: 20px;
    border-bottom: 1px solid #30363d;
  }
  h2 {
    color: #79c0ff;
    margin-bottom: 10px;
  }
  .data-box {
    background: #161b22;
    padding: 15px;
    border-radius: 8px;
    margin-top: 10px;
  }
  a {
    color: #58a6ff;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>
<header>
  <h1>Painel MNQ ‚Äî APEX / NinjaTrader</h1>
  <p>Foco: Micro E-mini Nasdaq-100 (MNQ) ‚Äî Pre√ßos & Manchetes Globais</p>
</header>

<div class="section">
  <h2>üìä Cota√ß√µes Principais</h2>
  <div class="data-box" id="prices">Carregando pre√ßos...</div>
</div>

<div class="section">
  <h2>üì∞ Manchetes que Impactam o Mercado</h2>
  <div class="data-box" id="news">Carregando manchetes...</div>
</div>

<div class="section">
  <h2>üìÖ Eventos Econ√¥micos Relevantes</h2>
  <p><a href="https://br.investing.com/economic-calendar/" target="_blank">Ver calend√°rio completo no Investing.com</a></p>
</div>

<script>
async function carregarPrecos() {
  const endpoints = {
    'Nasdaq-100 Futures (MNQ)': 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=NQ=F',
    'VIX': 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=^VIX',
    'DXY (Dollar Index)': 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=DX-Y.NYB',
    'UST 10Y Yield': 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=^TNX'
  };

  let html = '';
  for (const [nome, url] of Object.entries(endpoints)) {
    try {
      const proxy = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
      const res = await fetch(proxy);
      const data = await res.json();
      const parsed = JSON.parse(data.contents);
      const info = parsed.quoteResponse.result[0];
      const preco = info.regularMarketPrice || '‚Äî';
      const variacao = info.regularMarketChangePercent ? info.regularMarketChangePercent.toFixed(2) : '‚Äî';
      html += `<p><strong>${nome}:</strong> ${preco} (${variacao}%)</p>`;
    } catch (e) {
      html += `<p><strong>${nome}:</strong> n√£o dispon√≠vel</p>`;
    }
  }
  document.getElementById('prices').innerHTML = html;
}

async function carregarNoticias() {
  const feeds = [
    'https://feeds.reuters.com/reuters/businessNews',
    'https://www.cnbc.com/id/100003114/device/rss/rss.html',
    'https://www.investing.com/rss/news_25.rss'
  ];

  let html = '';
  for (const feed of feeds) {
    try {
      const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(feed)}`);
      const data = await res.json();
      const parser = new DOMParser();
      const xml = parser.parseFromString(data.contents, 'text/xml');
      const items = xml.querySelectorAll('item');
      for (let i = 0; i < 3; i++) {
        const title = items[i].querySelector('title').textContent;
        const link = items[i].querySelector('link').textContent;
        html += `<p><a href="${link}" target="_blank">${title}</a></p>`;
      }
    } catch (e) {
      html += `<p>‚ö†Ô∏è Erro ao carregar manchetes.</p>`;
    }
  }
  document.getElementById('news').innerHTML = html;
}

carregarPrecos();
carregarNoticias();
setInterval(() => {
  carregarPrecos();
  carregarNoticias();
}, 300000);
</script>
</body>
</html>